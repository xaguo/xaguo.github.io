---
title: 策略模式
date: 2017-08-30 16:13:27
tags: [设计模式,Java]
---
- 定义
策略模式将可变的部分从程序中抽象分离成算法接口，在该接口下分别封装一系列算法实现。<!-- more -->并使他们可以相互替换，从而使客户端程序独立于算法的改变。

- 设计原则
1. 将不变的部分抽象为接口，变化的部分交给实现部分去做。
2. 面向接口编程，而不是面向实现编程。
3. 多用组合，少用继承。
- 实现
1. 通过分离变化得出的策略接口 Strategy
2. 策略接口 Strategy 的实现类
3. 客户程序中“有一个” Strategy
4. 在客户程序中选择/组装正确的 Strategy 实现
- 优点
1. 使用了组合，使架构更加灵活。
2. 富有弹性，可以更好的应对变化（开闭原则）。
3. 更好的代码复用性（相对于继承）。
消除大量的选择语句。
- 缺点
1. 客户代码需要了解每一个策略的实现细节。
2. 增加了对象的数目。
- 适用场景
1. 许多相关类仅仅是行为的差异。
2. 运行时选取不同的算法变体。
3. 通过条件语句在多个分支选取其一。

举例

	```java
	package strategy;
	/**
	 * 策略接口，手机的上网功能接口
	 */
	public interface InternetStrategy {
		void performInternet();
	}
	```

-

	```java
	package strategy;
	/*
	 * 超类，手机类
	 */
	public abstract class Phone {
	/*
	 * 手机打电话功能
	 * 通用功能，由超类实现
	 */
		public void call() {
			System.out.println("可以打电话");
		}
		/*
		 * 手机描述
		 * 手机描述各不相同，声明为 abstract,由子类实现。
		 */
		public abstract void discript();
		
		public InternetStrategy internetStrategy;
		public void setInternetStrategy(InternetStrategy internetStrategy) {
			this.internetStrategy = internetStrategy;
		}
		/*
		 * 上网功能
		 */
		public void Internet() {
			internetStrategy.performInternet();
		}
	}
	```

-

	```java
	package strategy.impl;
	import strategy.InternetStrategy;
	/*
	 * 实现类，数据上网
	 */
	public class DataInternet implements InternetStrategy {
		@Override
		public void performInternet() {
			System.out.println("用数据流量上网");
		}
	}
	```

-

	```java
	package strategy.impl;
	import strategy.InternetStrategy;
	/*
	 * 实现类，数据/wifi上网
	 */
	public class WifiInternet implements InternetStrategy {
		@Override
		public void performInternet() {
			System.out.println("用  wifi/数据 上网");
		}
	}
```

-

	```java
	package strategy.impl;
	import strategy.InternetStrategy;
	/*
	 * 实现类，不能上网
	 */
	public class NoInternet implements InternetStrategy {
		@Override
		public void performInternet() {
			System.out.println("不能上网");
		}
	}
	```

-


	```java
	package strategy;
	import strategy.impl.DataInternet;
	/*
	 * 旧手机类
	 */
	public class OldPhone extends Phone{
		public OldPhone() {
			super();
			super.setInternetStrategy(new DataInternet());
		}
		@Override
		public void discript() {
			System.out.println("旧手机旧");
		}
	}
	```

-

	```java
	package strategy;
	import strategy.impl.WifiInternet;
	/*
	 * 新手机类
	 */
	public class NewPhone extends Phone{
		public NewPhone() {
			super();
			super.setInternetStrategy(new WifiInternet());
		}
		@Override
		public void discript() {
			System.out.println("新手机新");
		}
	}
	```

-

	```java
	package strategy;
	import strategy.impl.NoInternet;
	/*
	 * 大手机类
	 */
	public class BigPhone extends Phone {
		public BigPhone() {
			super();
			super.setInternetStrategy(new NoInternet());
		}
		@Override
		public void discript() {
			System.out.println("大手机大");
		}
	}
	```

-

	```java
	package strategy;
	/*
	 * 测试类
	 */
	public class PhoneTest {
		public static void main(String[] args) {
			System.out.println("测试Phone程序");
			System.out.println("************************");
			Phone phone = null;
			//phone = new OldPhone();
			//phone = new NewPhone();
			phone = new BigPhone();
			
			phone.call();
			phone.discript();
			phone.Internet();
			System.out.println("************************");
			System.out.println("测试完毕");
		}
	}
	```

