---
title: 模板方法模式
date: 2017-08-30 15:53:02
tags: [设计模式,Java]
---

模板方法模式是在日常开发中使用最为广泛的设计模式之一。
<!-- more -->

- 实现要素：
抽象基类（基本方法[private]、抽象方法[protected]、可选钩子[protected]、Template 方法[public final]）。

具体子类 (实现基类中的抽象方法、覆盖基类中钩子方法)

- 适用场景：
算法或操作遵循相似的逻辑。

重构时，把相同的代码抽取到父类中。

重要、复杂的算法，核心的算法设计为模板算法。

- 优点：1、封装性好。2、复用性好。3屏蔽细节。4、便于维护
- 缺点： 单继承

举例

	```java
	/*
	 * 抽象基类，为所有子类提供一个算法框架
	 * 画统计图
	 */
	public abstract class ChartBaseClass {
		/*
		 * 画统计图的模板方法 (final)
		 * 封装了所有子类共同遵循的算法框架
		 */
		public final void drawChartTemplate() {
			// 步骤1 准备画布
			cancas();
			// 步骤2 统计图类型
			type();
			// 步骤3 统计图数据
			data();
			// 步骤4 开始画图
			draw();
			if (isAddTitle()) {
				// 步骤5 添加统计图标题
				title();
			}
		}
		/*
		 * Hook, 钩子函数，
		 * 提供一个默认或空的实现 
		 * 具体的子类可以自行决定是否挂钩以及如何挂钩
		 * 询问用户是否添加标题
		 */
		protected boolean isAddTitle() {
			return true;
		}
		/*
		 * 基本方法，准备画布
		 */
		private void cancas() {
			System.out.println("准备画布");
		}
		/*
		 * 基本方法，开始画图
		 */
		private void draw() {
			System.out.println("开始画图");
		}
		/*
		 * 抽象的基本方法，统计图类型
		 */
		protected abstract void type();
		/*
		 * 抽象的基本方法, 统计图数据
		 */
		protected abstract void data();
		/**
		 * 抽象的基本方法, 统计图标题
		 */
		protected abstract void title();
	}
	```

-

	```java
	/**
	 * 具体子类，提供了画条形图的具体实现
	 */
	public class barChart extends ChartBaseClass{
		@Override
		protected void type() {
		System.out.println("条形图");
		}
		@Override
		protected void data() {
			System.out.println("条形图数据");
		}
		@Override
		protected void title() {
			System.out.println("这是一个条形图");
		}
		//覆盖基类是否加标题的方法
		@Override
		protected boolean isAddTitle() {
			return false;
		}	
	}
	```

-

	```java
	/**
	 * 具体子类，提供了画饼图的具体实现
	 */
	public class pieChart extends ChartBaseClass{
		@Override
		protected void type() {
			System.out.println("饼图");
		}
		@Override
		protected void data() {
			System.out.println("饼图的数据");
		}
		@Override
		protected void title() {
			System.out.println("这是一个饼图");
		}
	}
	```

-

	```java
	/**
	 * 测试类
	 */
	public class ChartBaseClassTest {
		
		public static void main(String[] args) {
			System.out.println("画条形图");
			ChartBaseClass cbc = new barChart();
			cbc.drawChartTemplate();
			System.out.println("条形图画好了");
			System.out.println("*************************");
			System.out.println("画饼图");
			ChartBaseClass cbc1 = new pieChart();
			cbc1.drawChartTemplate();
			System.out.println("饼图画好了");
		}
	}
	```