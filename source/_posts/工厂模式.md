---
title: 工厂模式
date: 2017-08-29 13:46:41
tags: [设计模式,Java]
---
工厂模式和抽象工厂模式是在日常开发中使用非常广泛的设计模式。
<!-- more -->
应用场合：大量产品需要创建，这些产品通常有共同接口，应用举例：JDBC、Spring beanfactory。

特点： 节省生产产品的代码量，统一化规范管理产品。

作用：实现将对象的实例化部分取出来，进而优化系统架构，增强系统的扩展性。

类型：静态工厂模式、抽象工厂模式。

## 静态工厂模式 ##

举例：

	```java
	/**
	* phone接口
	*/
	public interface Phone {
		public void call();
	}
	```

-

	```java
	/**
	* 手机类
	*/
	public class MobliePhone implements Phone {
		public void call() {
			System.out.println("MobliePhone call ...");
		}
	}
	```

-

	```java
	/**
	 * 电话类
	 */
	public class Telephone implements Phone {	
		public void call() {
			System.out.println("TelePhone call ...");	
		}
	}
	```

-

	```java
	/**
	 * Phone 工厂
	 */
	public class PhoneFactory {
		public static Phone getMobilePhone() {
			return new MobliePhone();
		}
		public static Phone getTelephone() {
			return new Telephone();
		}
	}
	```

-

```java
/**
 * 通过工厂获取 phone
 */
public class Test {
	public static void main(String[] args) {
		Phone sender = PhoneFactory.getMobilePhone();
		sender.call();
		Phone sender1 = PhoneFactory.getTelephone();
		sender1.call();
	}
}
```

静态工厂模式缺点：增加新产品时必须对类进行，违背闭包原则。 所以引入抽象工厂模式。

## 抽象工厂模式 ##

抽象工厂模式是一种比较常用的模式，其定义如下：

为创建一组相关或相互依赖的对象提供一个接口，而且无需指定他们的具体类。

使用场景：一个对象族，都有相同的约束，则可以使用抽象工厂模式。

特点：增加产品时，需要增加一个产品实现类 和 一个工厂。

- 优点： 封装性； 产品组内的条件非公开状态。

- 缺点： 产品族扩展非常困难。

举例:

	```java
	/**
	 * phone接口
	 */
	public interface Phone {
		public void call();
	}
	```

-

	```java
	/**
	 * 提供工厂的接口
	 */
	public interface Producer {
		public abstract Phone produce();
	}
	```

-

	```java
	/**
	 * 手机类
	 */
	public class MobliePhone implements Phone {
		public void call() {
			System.out.println("MobliePhone call ...");	
		}
	}
	```

-

	```java
	/**
	 * 电话类
	 */
	public class Telephone implements Phone {
		public void call() {
			System.out.println("TelePhone call ...");	
		}
	}
	```
-


	```java
	/**
	 * 手机工厂
	 */
	public class MobliePhoneFactory implements Producer {
		
		public Phone produce() {
			return new MobliePhone();
		}
	}
	```

-

	```java
	/**
	 * 电话工厂
	 */
	public class TelephoneFactory implements Producer {
		public Phone produce() {
			return new Telephone();
		}
	}
	```
-

	```java
	/**
	 * 通过工厂获取 phone
	 */
	public class Test {
		public static void main(String[] args) {
			 Producer producer = new MobliePhoneFactory();  
	         Phone sender = producer.produce();  
	         sender.call();         
	         Producer producer1 = new TelephoneFactory();  
	         Phone sender1 = producer1.produce();  
	         sender1.call(); 
		}
	}
	```

对比：

- 静态工厂模式是一种极端情况的抽象工厂模式，而抽象工厂模式可以看成是工厂模式的推广。
- 静态工厂模式用来创建一个产品的等级结构，而抽象工厂模式是用来创建多个产品的等级结构。
- 静态工厂模式只有一个抽象产品类，而抽象工厂模式有多个抽象产品类。

作用：

- 系统可以在不修改具体工厂角色的情况下引进新的产品。
- 客户端不必关心对象如何创建，明确了职责。
- 更好理解面向对象的原则：面向接口编程，而不是面向实现编程。




